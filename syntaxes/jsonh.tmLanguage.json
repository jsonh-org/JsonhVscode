{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "JSONH",
	"scopeName": "source.jsonh",
	"fileTypes": [ "jsonh" ],
	"patterns": [
		{ "include": "#comment" },
		{ "include": "#element" },
		{ "include": "#invalid" }
	],
	"repository": {
		"comment": {
			"patterns": [
				{
					"name": "comment.line.jsonh",
					"begin": "#.*",
					"end": "\n"
				},
				{
					"name": "comment.line.double-slash.jsonh",
					"match": "\\/\\/.*"
				},
				{
					"name": "comment.block.jsonh",
					"begin": "\\/\\*",
					"end": "\\*\\/"
				}
			]
		},
		"element": {
			"patterns": [
				{ "include": "#number" },
				{ "include": "#string" }
			]
		},
		"number": {
			"patterns": [
				{ "include": "#hexadecimal-number" },
				{ "include": "#binary-number" },
				{ "include": "#octal-number" },
				{ "include": "#decimal-number" }
			]
		},
		"decimal-number": {
			"name": "constant.numeric.decimal.jsonh",
			"match": "^\\s*[-+]?((([0-9](_?[0-9])*)(\\.)?(([0-9](_?[0-9])*))?)|(\\.([0-9](_?[0-9])*)))([eE][-+]?((([0-9](_?[0-9])*)(\\.)?(([0-9](_?[0-9])*))?)|(\\.([0-9](_?[0-9])*))))?\\s*$",
			"comment": "start (whitespace) (sign) [digits (dot) (digits), dot digits] (exponent (sign) [digits (dot) (digits), dot digits]) (whitespace) end"
		},
		"hexadecimal-number": {
			"name": "constant.numeric.hexadecimal.jsonh",
			"match": "^\\s*[-+]?0[xX]((([0-9a-fA-F](_?[0-9a-fA-F])*)(\\.)?(([0-9a-fA-F](_?[0-9a-fA-F])*))?)|(\\.([0-9a-fA-F](_?[0-9a-fA-F])*)))([eE][-+]?((([0-9a-fA-F](_?[0-9a-fA-F])*)(\\.)?(([0-9a-fA-F](_?[0-9a-fA-F])*))?)|(\\.([0-9a-fA-F](_?[0-9a-fA-F])*))))?\\s*$",
			"comment": "start (whitespace) (sign) (specifier) [digits (dot) (digits), dot digits] (exponent (sign) [digits (dot) (digits), dot digits]) (whitespace) end"
		},
		"binary-number": {
			"name": "constant.numeric.binary.jsonh",
			"match": "^\\s*[-+]?0[bB]((([0-1](_?[0-1])*)(\\.)?(([0-1](_?[0-1])*))?)|(\\.([0-1](_?[0-1])*)))([eE][-+]?((([0-1](_?[0-1])*)(\\.)?(([0-1](_?[0-1])*))?)|(\\.([0-1](_?[0-1])*))))?\\s*$",
			"comment": "start (whitespace) (sign) (specifier) [digits (dot) (digits), dot digits] (exponent (sign) [digits (dot) (digits), dot digits]) (whitespace) end"
		},
		"octal-number": {
			"name": "constant.numeric.octal.jsonh",
			"match": "^\\s*[-+]?0[oO]((([0-7](_?[0-7])*)(\\.)?(([0-7](_?[0-7])*))?)|(\\.([0-7](_?[0-7])*)))([eE][-+]?((([0-7](_?[0-7])*)(\\.)?(([0-7](_?[0-7])*))?)|(\\.([0-7](_?[0-7])*))))?\\s*$",
			"comment": "start (whitespace) (sign) (specifier) [digits (dot) (digits), dot digits] (exponent (sign) [digits (dot) (digits), dot digits]) (whitespace) end"
		},
		"string": {
			"patterns": [
				{ "include": "#quoted-string" },
				{ "include": "#multi-quoted-string" },
				{ "include": "#quoteless-string" }
			]
		},
		"quoted-string": {
			"name": "string.quoted.jsonh",
			"begin": "^\\s*(\"|')",
			"end": "(\\1)\\s*$",
			"beginCaptures": {
				"0": { "name": "punctuation.definition.string.begin.jsonh" }
			},
			"endCaptures": {
				"0": { "name": "punctuation.definition.string.end.jsonh" }
			},
			"patterns": [
				{ "include": "#escape" }
			],
			"comment": "start (whitespace) quote -> backreference (whitespace) end"
		},
		"multi-quoted-string": {
			"name": "string.quoted.jsonh",
			"begin": "^\\s*((\"|'){3,})",
			"end": "(\\1)\\s*$",
			"beginCaptures": {
				"0": { "name": "punctuation.definition.string.begin.jsonh" }
			},
			"endCaptures": {
				"0": { "name": "punctuation.definition.string.end.jsonh" }
			},
			"patterns": [
				{ "include": "#escape" }
			],
			"comment": "start (whitespace) quote{3+} -> backreference (whitespace) end"
		},
		"quoteless-string": {
			"name": "string.unquoted.jsonh",
			"begin": "^\\s*(?=([^\\\\\\,\\:\\[\\]\\{\\}\\/\\#\\\"\\'\\n\\r\\u2028\\u2029]|(\\\\.)))",
			"end": "(?!([^\\\\\\,\\:\\[\\]\\{\\}\\/\\#\\\"\\'\\n\\r\\u2028\\u2029]|(\\\\.)))\\s*$",
			"beginCaptures": {
				"0": { "name": "punctuation.definition.string.begin.jsonh" }
			},
			"endCaptures": {
				"0": { "name": "punctuation.definition.string.end.jsonh" }
			},
			"patterns": [
				{ "include": "#escape" }
			],
			"comment": "start (whitespace) [not-reserved-not-newline, escape]{1+} -> NOT<[not-reserved-not-newline, escape]> (whitespace) end"
		},
		"escape": {
			"patterns": [
				{
					"name": "constant.character.escape.newline.jsonh",
					"begin": "\\\\$",
					"end": "^"
				},
				{
					"name": "constant.character.escape.utf16.jsonh",
					"match": "\\\\u[0-9a-fA-F]{4}"
				},
				{
					"name": "constant.character.escape.short-utf16.jsonh",
					"match": "\\\\x[0-9a-fA-F]{2}"
				},
				{
					"name": "constant.character.escape.utf32.jsonh",
					"match": "\\\\U[0-9a-fA-F]{8}"
				},
				{
					"name": "constant.character.escape.character.jsonh",
					"match": "\\\\."
				}
			]
		},
		"invalid": {
			"name": "invalid.illegal.jsonh",
			"match": "."
		}
	}
}